# éƒ¨ç½²æŒ‡å—ï¼šWorkers vs Pages

## ğŸš¨ é‡è¦è¯´æ˜

ä½ é‡åˆ°çš„é”™è¯¯æ˜¯å› ä¸ºï¼š
- **Next.js ä¸èƒ½ç›´æ¥ç”¨ `wrangler deploy` éƒ¨ç½²åˆ° Workers**
- éœ€è¦é€‚é…å™¨æˆ–æ”¹ç”¨ Pages

## ä¸¤ç§éƒ¨ç½²æ–¹å¼

### æ–¹å¼ 1: Cloudflare Pagesï¼ˆæ¨è â­ï¼‰

**ä¼˜ç‚¹**ï¼š
- âœ… ç›´æ¥æ”¯æŒ Next.jsï¼Œæ— éœ€é€‚é…å™¨
- âœ… æ”¯æŒ SSRã€API è·¯ç”±
- âœ… å¯ä»¥ç»‘å®š R2ã€KVã€D1
- âœ… éƒ¨ç½²ç®€å•

**éƒ¨ç½²å‘½ä»¤**ï¼š
```bash
npm run build
npx wrangler pages deploy .next --project-name=ainova-life
```

**åœ¨ Cloudflare Dashboard ä¸­**ï¼š
1. è¿›å…¥ **Pages**ï¼ˆä¸æ˜¯ Workersï¼‰
2. è¿æ¥ GitHub ä»“åº“
3. æ„å»ºå‘½ä»¤ï¼š`npm run build`
4. è¾“å‡ºç›®å½•ï¼š`.next`

### æ–¹å¼ 2: Cloudflare Workersï¼ˆéœ€è¦é€‚é…å™¨ï¼‰

**éœ€è¦å®‰è£…é€‚é…å™¨**ï¼š
```bash
npm install --save-dev @cloudflare/next-on-pages
```

**ä¿®æ”¹ next.config.ts**ï¼š
```typescript
import { withCloudflarePagesAdapter } from '@cloudflare/next-on-pages/next-config';

const nextConfig = {
  // ... ä½ çš„é…ç½®
};

export default withCloudflarePagesAdapter(nextConfig);
```

**æ„å»ºå’Œéƒ¨ç½²**ï¼š
```bash
npm run build
npx wrangler deploy
```

## å…³äºå­˜å‚¨

### å¦‚æœä½ ä½¿ç”¨ Workers

Workers **æ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿ**ï¼Œå¿…é¡»ä½¿ç”¨å¤–éƒ¨å­˜å‚¨ï¼š

1. **R2**ï¼ˆå¯¹è±¡å­˜å‚¨ï¼‰
   - âœ… é€‚åˆæ–‡ä»¶å’Œ JSON æ•°æ®
   - âœ… å½“å‰ä»£ç å·²æ”¯æŒ
   - âœ… éœ€è¦åˆ›å»º R2 bucket

2. **KV**ï¼ˆé”®å€¼å­˜å‚¨ï¼‰
   - âœ… é€‚åˆå°æ•°æ®
   - âš ï¸ éœ€è¦ä¿®æ”¹ä»£ç 

3. **D1**ï¼ˆSQLite æ•°æ®åº“ï¼‰
   - âœ… é€‚åˆç»“æ„åŒ–æ•°æ®
   - âš ï¸ éœ€è¦ä¿®æ”¹ä»£ç 

4. **å¤–éƒ¨å­˜å‚¨**ï¼ˆä½ çš„"è‡ªå·±çš„å­˜å‚¨åº“"ï¼‰
   - âœ… å¦‚æœä½¿ç”¨å¤–éƒ¨æ•°æ®åº“/API
   - âš ï¸ éœ€è¦ä¿®æ”¹ä»£ç æ¥è°ƒç”¨ä½ çš„ API

### å¦‚æœä½ ä½¿ç”¨ Pages

Pages å¯ä»¥ï¼š
- âœ… ç»‘å®š R2ã€KVã€D1
- âœ… ä½¿ç”¨å½“å‰ä»£ç ï¼ˆå·²æ”¯æŒ R2ï¼‰
- âœ… æˆ–è€…ä¿®æ”¹ä¸ºä½¿ç”¨ä½ çš„å¤–éƒ¨å­˜å‚¨

## ä½ çš„æƒ…å†µ

ä½ è¯´"æœ‰è‡ªå·±çš„å­˜å‚¨åº“"ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼š

1. **ä½ ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆå­˜å‚¨ï¼Ÿ**
   - å¤–éƒ¨æ•°æ®åº“ï¼ˆMySQLã€PostgreSQLã€MongoDBï¼‰ï¼Ÿ
   - å¤–éƒ¨ API æœåŠ¡ï¼ˆSupabaseã€Firebaseï¼‰ï¼Ÿ
   - å…¶ä»–äº‘å­˜å‚¨ï¼Ÿ

2. **ä½ æƒ³ç”¨ Workers è¿˜æ˜¯ Pagesï¼Ÿ**
   - Workersï¼šéœ€è¦é€‚é…å™¨ï¼Œä½†æ›´çµæ´»
   - Pagesï¼šæ›´ç®€å•ï¼Œæ¨èç”¨äº Next.js

## å¿«é€Ÿä¿®å¤éƒ¨ç½²é”™è¯¯

### å¦‚æœä½¿ç”¨ Pagesï¼ˆæ¨èï¼‰

åœ¨ Cloudflare Dashboard çš„ **Pages** è®¾ç½®ä¸­ï¼š
- éƒ¨ç½²å‘½ä»¤æ”¹ä¸ºï¼š`npm run build && npx wrangler pages deploy .next`

æˆ–è€…ä½¿ç”¨ GitHub é›†æˆï¼Œè‡ªåŠ¨éƒ¨ç½²ã€‚

### å¦‚æœä½¿ç”¨ Workers

éœ€è¦å…ˆå®‰è£…é€‚é…å™¨ï¼Œç„¶åæ‰èƒ½éƒ¨ç½²ã€‚

## ä¸‹ä¸€æ­¥

è¯·å‘Šè¯‰æˆ‘ï¼š
1. ä½ æƒ³ç”¨ Workers è¿˜æ˜¯ Pagesï¼Ÿ
2. ä½ çš„"è‡ªå·±çš„å­˜å‚¨åº“"æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆè¿™æ ·æˆ‘å¯ä»¥å¸®ä½ ä¿®æ”¹ä»£ç ï¼‰

ç„¶åæˆ‘ä¼šå¸®ä½ ï¼š
- ä¿®å¤éƒ¨ç½²é…ç½®
- å¦‚æœéœ€è¦ï¼Œä¿®æ”¹ä»£ç ä½¿ç”¨ä½ çš„å­˜å‚¨æ–¹æ¡ˆ

